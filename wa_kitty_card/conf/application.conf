# https://www.playframework.com/documentation/latest/Configuration

play.http.errorHandler = "error.ErrorHandler"

# Increase Pekko coordinated shutdown timeout to prevent premature shutdowns
pekko {
  coordinated-shutdown {
    # Increase the timeout for the coordinated shutdown
    default-phase-timeout = 30s
    
    # Timeout for waiting for ongoing requests to complete
    phases {
      service-requests-done {
        timeout = 30s
      }
      service-stop {
        timeout = 30s
      }
    }
  }
  
  # Actor system configuration
  actor {
    default-dispatcher {
      fork-join-executor {
        parallelism-min = 8
        parallelism-factor = 3.0
        parallelism-max = 64
      }
    }
  }
}

play.filters.hosts {
  allowed = ["localhost", "127.0.0.1", ".trycloudflare.com", "syndication-such-carnival-extreme.trycloudflare.com" , "kittycards.apps.sharina.tech/api" , "localhost:8080"]
}

play.filters.disabled += "play.filters.csrf.CSRFFilter"

# Enable CORS for API endpoints
play.filters.enabled += "play.filters.cors.CORSFilter"
play.filters.cors {
  pathPrefixes = ["/api"]
  allowedOrigins = ["http://localhost:8080", "http://localhost:3000"]
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowedHttpHeaders = ["Accept", "Content-Type", "Origin", "Authorization"]
  exposedHeaders = ["Access-Control-Allow-Origin"]
  supportsCredentials = true
  preflightMaxAge = 3600
}